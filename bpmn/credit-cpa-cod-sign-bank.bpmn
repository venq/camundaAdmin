<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0xnucsw" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.27.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.5.0">
  <bpmn:escalation id="Escalation_2c40ds6" name="TO_VERIFICATION" escalationCode="TO_VERIFICATION" />
  <bpmn:collaboration id="Collaboration_1fs8l7x">
    <bpmn:participant id="Participant_0nfdend" name="Подписание КОД банком" processRef="credit-cpa-cod-sign-bank" />
    <bpmn:textAnnotation id="TextAnnotation_10b4nm2">
      <bpmn:text>Подписывающий</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_0ssjew1">
      <bpmn:text>Подписание КОД банком</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_1ooqpo8" sourceRef="credit-cpa-cod-sign-bank.UserTaskBankSignCod" targetRef="TextAnnotation_10b4nm2" />
    <bpmn:association id="Association_1oaqa24" associationDirection="None" sourceRef="Activity_1jq2vqn" targetRef="TextAnnotation_0ssjew1" />
    <bpmn:textAnnotation id="TextAnnotation_1akpr2g">
      <bpmn:text>Бэк-офис
Поменять подписанта в т.ч. в КОД</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0z9r40g" associationDirection="None" sourceRef="credit-cpa-cod-sign-bank.UserTaskChangeSigner" targetRef="TextAnnotation_1akpr2g" />
  </bpmn:collaboration>
  <bpmn:process id="credit-cpa-cod-sign-bank" name="Подписание КОД банком" isExecutable="true">
    <bpmn:userTask id="credit-cpa-cod-sign-bank.UserTaskBankSignCod" name="Подписать КОД (банк)">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:input source="=[&#34;AUTHORIZED_PERSON&#34;]" target="AssignGroups" />
          <zeebe:output source="=decisionId" target="UserTaskBankSignCodResult" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="name" value="Подписать КОД" />
        </zeebe:taskHeaders>
        <zeebe:assignmentDefinition candidateGroups="=[&#34;AUTHORIZED_PERSON&#34;]" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0t0lp4w</bpmn:incoming>
      <bpmn:incoming>Flow_0v8leua</bpmn:incoming>
      <bpmn:outgoing>Flow_1oq80pi</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1q6zwto" default="Flow_1t0v8o6">
      <bpmn:incoming>Flow_1oq80pi</bpmn:incoming>
      <bpmn:outgoing>Flow_0hnreot</bpmn:outgoing>
      <bpmn:outgoing>Flow_1t0v8o6</bpmn:outgoing>
      <bpmn:outgoing>Flow_148oxhd</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_07rjpqb" name="Срок истек">
      <bpmn:incoming>Flow_0hnreot</bpmn:incoming>
      <bpmn:escalationEventDefinition id="EscalationEventDefinition_02n4kej" escalationRef="Escalation_2c40ds6" />
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_10qroex" name="Проверка подписанных документов">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="credit-cpa-main.ServiceTaskMock" retries="0" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1t0v8o6</bpmn:incoming>
      <bpmn:outgoing>Flow_12b5ryu</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0n0enqt" default="Flow_1hdje68">
      <bpmn:incoming>Flow_12b5ryu</bpmn:incoming>
      <bpmn:outgoing>Flow_0t0lp4w</bpmn:outgoing>
      <bpmn:outgoing>Flow_1hdje68</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="Event_0fqxoct">
      <bpmn:incoming>Flow_1hdje68</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_1jq2vqn" name="Установить статус заявки">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="common-cpa-main.ServiceTaskUpdateStatus" retries="0" />
        <zeebe:ioMapping>
          <zeebe:input source="=&#34;contractSignBank&#34;" target="code" />
          <zeebe:input source="=orderId" target="orderId" />
          <zeebe:input source="=97" target="percent" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04utb3g</bpmn:incoming>
      <bpmn:outgoing>Flow_0vcnmi3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0t0lp4w" sourceRef="Gateway_0n0enqt" targetRef="credit-cpa-cod-sign-bank.UserTaskBankSignCod">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1oq80pi" sourceRef="credit-cpa-cod-sign-bank.UserTaskBankSignCod" targetRef="Gateway_1q6zwto" />
    <bpmn:sequenceFlow id="Flow_0hnreot" sourceRef="Gateway_1q6zwto" targetRef="Event_07rjpqb">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=UserTaskBankSignCodResult = "decisionExpired"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1t0v8o6" sourceRef="Gateway_1q6zwto" targetRef="Activity_10qroex" />
    <bpmn:sequenceFlow id="Flow_148oxhd" name="Отказ подписанта" sourceRef="Gateway_1q6zwto" targetRef="credit-cpa-cod-sign-bank.UserTaskChangeSigner">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=UserTaskBankSignCodResult = "rework"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_12b5ryu" sourceRef="Activity_10qroex" targetRef="Gateway_0n0enqt" />
    <bpmn:sequenceFlow id="Flow_1hdje68" sourceRef="Gateway_0n0enqt" targetRef="Event_0fqxoct" />
    <bpmn:sequenceFlow id="Flow_0vcnmi3" sourceRef="Activity_1jq2vqn" targetRef="credit-cpa-cod-sign-bank.UserTaskChangeSigner" />
    <bpmn:sequenceFlow id="Flow_04utb3g" sourceRef="Event_1twzc86" targetRef="Activity_1jq2vqn" />
    <bpmn:startEvent id="Event_1twzc86">
      <bpmn:outgoing>Flow_04utb3g</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_0v8leua" sourceRef="credit-cpa-cod-sign-bank.UserTaskChangeSigner" targetRef="credit-cpa-cod-sign-bank.UserTaskBankSignCod" />
    <bpmn:userTask id="credit-cpa-cod-sign-bank.UserTaskChangeSigner" name="Определить подписанта Банка">
      <bpmn:extensionElements>
        <zeebe:taskHeaders>
          <zeebe:header key="name" value="Определить подписанта Банка" />
        </zeebe:taskHeaders>
        <zeebe:assignmentDefinition candidateGroups="=[&#34;BACK_OFFICE&#34;, &#34;BACK_OFFICE_MANAGER&#34;]" />
        <zeebe:ioMapping>
          <zeebe:input source="=[&#34;BACK_OFFICE&#34;]" target="AssignGroups" />
          <zeebe:input source="=[&#34;BACK_OFFICE_MANAGER&#34;]" target="ManagerGroups" />
          <zeebe:input source="=&#34;BACK_OFFICE_ROLE&#34;" target="WorkGroupRole" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0vcnmi3</bpmn:incoming>
      <bpmn:incoming>Flow_148oxhd</bpmn:incoming>
      <bpmn:outgoing>Flow_0v8leua</bpmn:outgoing>
    </bpmn:userTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1fs8l7x">
      <bpmndi:BPMNShape id="Participant_0nfdend_di" bpmnElement="Participant_0nfdend" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1170" height="560" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1adbd82" bpmnElement="credit-cpa-cod-sign-bank.UserTaskBankSignCod" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="678" y="350" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_19etld0" bpmnElement="Gateway_1q6zwto" isMarkerVisible="true">
        <dc:Bounds x="855" y="365" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1pt8opt" bpmnElement="Event_07rjpqb" bioc:stroke="#fb8c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#fb8c00">
        <dc:Bounds x="862" y="472" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="852" y="515" width="57" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1pp3oin" bpmnElement="Activity_10qroex" bioc:stroke="#6b3c00" bioc:fill="#ffe0b2" color:background-color="#ffe0b2" color:border-color="#6b3c00">
        <dc:Bounds x="970" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_03f473k" bpmnElement="Gateway_0n0enqt" isMarkerVisible="true">
        <dc:Bounds x="1135" y="365" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1kjg9jp" bpmnElement="Event_0fqxoct" bioc:stroke="#43a047" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#43a047">
        <dc:Bounds x="1252" y="372" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1i8ssz8" bpmnElement="Activity_1jq2vqn" bioc:stroke="#43a047" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#43a047">
        <dc:Bounds x="360" y="350" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1aomrl4" bpmnElement="Event_1twzc86" bioc:stroke="#43a047" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#43a047">
        <dc:Bounds x="262" y="372" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_162znki" bpmnElement="credit-cpa-cod-sign-bank.UserTaskChangeSigner" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="520" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_16ftxtq" bpmnElement="Flow_0t0lp4w" bioc:stroke="#fb8c00" color:border-color="#fb8c00">
        <di:waypoint x="1160" y="415" />
        <di:waypoint x="1160" y="570" />
        <di:waypoint x="728" y="570" />
        <di:waypoint x="728" y="430" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1gvnqgp" bpmnElement="Flow_1oq80pi" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="778" y="390" />
        <di:waypoint x="855" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0lvqwhg" bpmnElement="Flow_0hnreot" bioc:stroke="#fb8c00" color:border-color="#fb8c00">
        <di:waypoint x="880" y="415" />
        <di:waypoint x="880" y="472" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_00smdci" bpmnElement="Flow_1t0v8o6" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="905" y="390" />
        <di:waypoint x="970" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0i4g6ml" bpmnElement="Flow_148oxhd" bioc:stroke="#fb8c00" color:border-color="#fb8c00">
        <di:waypoint x="880" y="365" />
        <di:waypoint x="880" y="250" />
        <di:waypoint x="570" y="250" />
        <di:waypoint x="570" y="350" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="729" y="256" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_18lzq75" bpmnElement="Flow_12b5ryu" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="1070" y="390" />
        <di:waypoint x="1135" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_05crruv" bpmnElement="Flow_1hdje68" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="1185" y="390" />
        <di:waypoint x="1252" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_0t7vnse" bpmnElement="Flow_0vcnmi3" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="460" y="390" />
        <di:waypoint x="520" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_03u4o4s" bpmnElement="Flow_04utb3g" bioc:stroke="#43a047" color:border-color="#43a047">
        <di:waypoint x="298" y="390" />
        <di:waypoint x="360" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0v8leua_di" bpmnElement="Flow_0v8leua">
        <di:waypoint x="620" y="390" />
        <di:waypoint x="678" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="BPMNShape_03oqeah" bpmnElement="TextAnnotation_10b4nm2">
        <dc:Bounds x="610" y="300" width="110" height="30" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1anasxo" bpmnElement="TextAnnotation_0ssjew1">
        <dc:Bounds x="320" y="295" width="100" height="40" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1akpr2g_di" bpmnElement="TextAnnotation_1akpr2g">
        <dc:Bounds x="450" y="260" width="99.99202297383536" height="69.55966815571155" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_112x02q" bpmnElement="Association_1ooqpo8">
        <di:waypoint x="713" y="350" />
        <di:waypoint x="699" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1cdsy88" bpmnElement="Association_1oaqa24">
        <di:waypoint x="389" y="350" />
        <di:waypoint x="381" y="335" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0z9r40g_di" bpmnElement="Association_0z9r40g">
        <di:waypoint x="546" y="350" />
        <di:waypoint x="533" y="330" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
